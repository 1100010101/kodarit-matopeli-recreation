(this["webpackJsonpmatopeli-recreated"]=this["webpackJsonpmatopeli-recreated"]||[]).push([[0],[,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(1),r=n.n(c),o=n(7),i=n.n(o),s=(n(13),n(2)),u=(n(14),n(3)),l=function(t){return Object(u.a)(Array(Math.round(t)).keys())},j=(n(15),function(t){var e=t.points,n=t.setPoints,r=Object(c.useState)(parseInt(localStorage.getItem("snake-board-size"))||10),o=Object(s.a)(r,2),i=o[0],j=o[1],b=Object(c.useState)(parseInt(localStorage.getItem("snake-board-size")||10)),f=Object(s.a)(b,2),d=f[0],p=f[1],O=function(){for(var t=[],e=0;e<i;e++){t[e]=[];for(var n=0;n<d;n++)t[e][n]="blank"}return t},m=function(){return[{name:"tyhj\xe4",location:[]},{name:"keski",location:l(.6*d).map((function(t){return{x:Math.round(i/2),y:t+Math.ceil(.2*d)}}))},{name:"reunat",location:[].concat(Object(u.a)(l(d).map((function(t){return{x:t,y:0}}))),Object(u.a)(l(d).map((function(t){return{x:t,y:i-1}}))),Object(u.a)(l(i).map((function(t){return{x:0,y:t}}))),Object(u.a)(l(i).map((function(t){return{x:i-1,y:t}}))))},{name:"oma",location:[].concat(Object(u.a)(l(d).map((function(t){return{x:t,y:0}}))),Object(u.a)(l(d).map((function(t){return{x:t,y:i-2}}))),Object(u.a)(l(d).map((function(t){return{x:t,y:i-1}}))),Object(u.a)(l(i).map((function(t){return{x:0,y:t}}))),Object(u.a)(l(i).map((function(t){return{x:1,y:t}}))),Object(u.a)(l(d).map((function(t){return{x:t,y:1}}))),Object(u.a)(l(i).map((function(t){return{x:i-2,y:t}}))),Object(u.a)(l(i).map((function(t){return{x:i-1,y:t}}))))}]},x=function(){return m()[Math.floor(Math.random()*m().length)]},h=function t(){var e={x:Math.floor(Math.random()*d),y:Math.floor(Math.random()*i)};return k.location.some((function(t){var n=t.x,a=t.y;return e.x===n&&e.y===a}))?t():e},y=Object(c.useState)(x()),v=Object(s.a)(y,2),k=v[0],S=v[1],g=Object(c.useState)(O),N=Object(s.a)(g,2),w=N[0],I=N[1],E=Object(c.useState)([{x:2,y:2}]),M=Object(s.a)(E,2),A=M[0],P=M[1],B=Object(c.useState)("right"),J=Object(s.a)(B,2),L=J[0],z=J[1],C=Object(c.useState)(h),K=Object(s.a)(C,2),G=K[0],F=K[1],R=Object(c.useState)(),T=Object(s.a)(R,2),U=T[0],q=T[1],D=Object(c.useState)(!1),H=Object(s.a)(D,2),Q=H[0],V=H[1],W=Object(c.useState)(!1),X=Object(s.a)(W,2),Y=X[0],Z=X[1],$=Object(c.useState)(null),_=Object(s.a)($,2),tt=_[0],et=_[1];Object(c.useEffect)((function(){d>=10&&d<=100&&i>=10&&i<=100&&(S(x()),I(O()),F(h()))}),[d,i]);document.addEventListener("keydown",(function(t){switch(t.keyCode){case 37:z("left");break;case 38:z("top");break;case 39:z("right");break;case 40:z("bottom")}}));var nt=w.map((function(t,e){return Object(a.jsxs)("div",{className:"Snake-row",children:[" ",t.map((function(t,n){return Object(a.jsx)("div",{className:"tile ".concat(t)},"".concat(e,"-").concat(n))}))," "]},e)}));return function(t,e,n){var a=Object(c.useRef)();Object(c.useEffect)((function(){a.current=t}),[t]),Object(c.useEffect)((function(){if(null!==e){var t=setInterval((function(){a.current()}),e);return n(t),function(){return clearInterval(t)}}}),[e,n])}((function(){if(Y){var t=[];switch(L){case"right":t.push({x:A[0].x,y:(A[0].y+1)%d});break;case"left":t.push({x:A[0].x,y:(A[0].y-1+d)%d});break;case"top":t.push({x:(A[0].x-1+i)%i,y:A[0].y});break;case"bottom":t.push({x:(A[0].x+1)%i,y:A[0].y})}if(function(){var t=A[0],e=A.slice(1,-1).find((function(e){return e.x===t.x&&e.y===t.y})),n=k.location.some((function(e){var n=e.x,a=e.y;return t.x===n&&t.y===a}));return e||n}()){V(!0),clearInterval(U);var a=JSON.parse(localStorage.getItem("snake-points"))||[],c=prompt("Peli p\xe4\xe4ttyi! Anna nimimerkkisi:");a.push({name:c,points:e}),localStorage.setItem("snake-points",JSON.stringify(a)),window.dispatchEvent(new Event("storage"))}A.forEach((function(e){t.push(e)}));var r=A[0];r.x===G.x&&r.y===G.y?(F(h),n(e+1)):t.pop(),P(t),function(){var t=O();A.forEach((function(e){t[e.x][e.y]="snake"})),t[G.x][G.y]="food",k.location.forEach((function(e){t[e.x][e.y]="obstacle"})),I(t)}()}}),200,q),Object(a.jsxs)("div",{className:"Snake-board",children:[!Y&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:["Pelilaudan koko on nyt ",d," ruutua."]}),Object(a.jsx)("div",{children:"Aseta halutessasi uusi pelilaudan koko:"}),Object(a.jsx)("input",{className:"Board-size",placeholder:"Koko 10-100",type:"number",onChange:function(t){var e=parseInt(t.target.value);e<=100&&e>=10?(console.log("OK",e),p(e),j(e),localStorage.setItem("snake-board-size",e),et(null)):(console.error("Kokeile jotain toista lukua",e),et("Pelilaudan koko on liian ".concat(e>100?"suuri":"pieni")))}}),tt&&Object(a.jsx)("div",{className:"Error",children:tt}),Object(a.jsx)("button",{className:"Start-game",onClick:Z,children:"Aloita peli"})]})," ",Y&&nt,Q&&Object(a.jsx)("div",{className:"Game-over",children:" Game over! "})," "]})}),b=(n(16),function(t){var e=t.points;return Object(a.jsxs)("div",{className:"Points",children:[" ",e,"pistett\xe4 "]})}),f=(n(17),function(){return JSON.parse(localStorage.getItem("snake-points"))||[]}),d=function(){var t=Object(c.useState)(f()),e=Object(s.a)(t,2),n=e[0],r=e[1];window.addEventListener("storage",(function(){r(f())}));var o=n.sort((function(t,e){return e.points-t.points}));return Object(a.jsxs)("div",{className:"LeaderBoard",children:[Object(a.jsx)("div",{className:"LeaderBoard-header",children:" Top 5 "}),Object(a.jsxs)("div",{className:"LeaderBoard-points",children:[o.slice(0,5).map((function(t,e){return Object(a.jsxs)("div",{children:[t.name,t.points," "]},"".concat(t.points,"-").concat(e))})),"pisteet"]})]})},p=function(){var t=Object(c.useState)(0),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("header",{className:"App-header",children:" Matopeli "})," ",Object(a.jsx)(b,{points:n})," ",Object(a.jsx)(j,{points:n,setPoints:r})," ",Object(a.jsx)("button",{onClick:function(){return window.location.reload()},children:" Uusi peli "}),Object(a.jsx)(d,{})]})};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(p,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.13996a46.chunk.js.map